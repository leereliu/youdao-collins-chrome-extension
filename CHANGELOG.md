# CHANGELOG

## v2.1.0

### 新增
- **AI 增强翻译**（可选）：配置 API Key 后，长文本获得双重翻译
  - 有道机翻：快速显示基础翻译
  - AI 流式翻译：实时逐字显示更准确的翻译
- **智能文本判断**：自动识别单词/短语和长文本
- **API Key 配置**：支持在设置页面自定义 OpenRouter API Key
- 支持 Popup 和划词两种场景的流式翻译

### 改进
- 有道翻译作为默认，AI 翻译作为可选增强功能
- 未配置 API Key 时，所有文本使用有道翻译，不影响使用
- 配置 API Key 后，长文本同时显示有道和 AI 两种翻译
- 优化翻译 UI，添加流式状态指示和动画效果
- 优化消息通信机制，支持 Popup 和 Content Script 同时接收流式数据
- API Key 存储在本地，更安全

### 使用说明
- 💡 不配置 API Key：所有文本使用有道翻译（默认行为）
- ✨ 配置 API Key：长文本获得有道 + AI 双重翻译
- 🆓 推荐免费模型：xiaomi/mimo-v2-flash:free
- 🔗 获取 API Key：https://openrouter.ai/keys

### 技术细节
- 集成 OpenRouter AI API (Xiaomi Mimo V2 Flash)
- 使用 Server-Sent Events (SSE) 实现流式传输
- 优化 React 状态管理，避免闭包陷阱
- API Key 配置化，支持用户自定义
- 智能降级：未配置 API Key 时自动使用有道翻译

---

## v2.0.2

### 新增
- 添加扇贝失败时显示浮动错误提示（扇贝词库没有此单词、请先登录等）

### 改进
- 代码格式优化

---

## v2.0.1

### 修复
- 修复划词翻译弹窗在长句子时不显示的问题
- 修复释义中可点击单词无法触发搜索的问题
- 修复扇贝生词本图标在 popup 中显示异常的问题
- 修复添加扇贝成功后点击图标无法跳转生词本的问题
- 修复扇贝登录失效时系统通知不显示的问题

### 改进
- 抽象共用的 `WordDetail` 组件，统一 popup 和 overlay 的 UI
- 优化扇贝 API 错误处理和通知机制
- 添加扇贝按钮防抖机制，避免重复请求

---

## v2.0.0

🎉 **重大更新：全面重构**

### 技术栈升级
- 迁移到 [Plasmo Framework](https://www.plasmo.com/) - 零配置 Chrome 扩展开发
- 升级到 React 19
- 全面使用 TypeScript 重写
- 使用 Tailwind CSS 替代内联样式
- 升级到 Manifest V3
- 使用 Vitest 进行单元测试

### 改进
- 更好的代码组织和模块化
- 类型安全的消息通信
- 优化的构建流程和热重载体验
- 更好的错误处理

### 兼容性
- 保持与原有功能完全兼容
- 支持所有原有的划词翻译模式
- 扇贝生词本功能正常工作

---

## v1.2.0
- 特性：支持在popup界面上停用划词翻译
- 特性：popup搜索后自动选中全部文本，便于删除
- 修复：划词弹层无法被选中

## v1.1.3
- 修复：错误使用token导致的无法添加单词

## v1.1.2
- 修复：window及linux下打开窗口时聚焦到input上

## v1.1.1
- 修复：滚动样式

## v1.1.0
- 特性：接入扇贝词库

## v1.0.8
- 修复：触发事件错误

## v1.0.7
- 修复：静态文件图标命名错误

## v1.0.6
- 修复：静态文件图标命名错误

## v1.0.5
- 修复：多选择项被当成单选择项
- 特性：双击后划词翻译（拖拽选中不翻译）

## v1.0.4

- 特性：添加通过Ctrl+Q打开popup page的快捷键
- 特性：修复部分同义单词无任何反馈的问题，会跳转去搜索对应的同义单词解释
- 构建：uglify缩小代码体积

## v1.0.3

- bug修复
- 特性：添加反馈链接

## v1.0.2
